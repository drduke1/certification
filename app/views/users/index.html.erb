<% provide(:title, 'All Users') %>

<h1>All Users</h1>

<div id="container" style="width:1100px; margin-left: auto; margin-right: auto;">

<table id="users" class="table table-striped table-hover table-bordered" style="background-color: white">
  <thead>
  <button type="button" class="reset">Reset Search</button>
      <th width="20%" onMouseOver="this.style.color='#00F'" onMouseOut="this.style.color='black'" data-placeholder="Search">Name</th>
      <th width="25%" onMouseOver="this.style.color='#00F'" onMouseOut="this.style.color='black'" data-placeholder="Search">Email</th>
      <th width="15%" onMouseOver="this.style.color='#00F'" onMouseOut="this.style.color='black'" data-placeholder="Search">Permission</th>
      <th width="8%" onMouseOver="this.style.color='#00F'" onMouseOut="this.style.color='black'" data-placeholder="Search">Admin</th>
      <th width="8%" class="filter-false" >Manage</th>
      <th width="8%" class="filter-false" >Manage</th>
      <th width="8%" class="filter-false" >Manage</th>
  </thead>

  <tbody>
    <% @users.each do |user| %>
    <% @permission = user.permission.to_s %>
    <% @permission = @permission.gsub(/[\["_\]]/, ' ') %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.email %></td>
        <td style="white-space:pre-wrap;"><%= @permission.gsub(/,/, "\n") %></td>
        <td><%= user.admin %></td>
        <td><%= link_to 'Show', user %></td>
        <td><%= link_to 'Edit', edit_user_path(user) %></td>
        <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

</div>
<br>

<%= link_to 'New User', new_user_path %>

<script>

	$(document).ready(function() 
	    { 
	        $("#users").tablesorter({
	        widgets: ["filter"],
	        
	        widgetOptions: {
	        	filter_columnFilters : true,
	        	filter_ignoreCase : true,
	        	filter_liveSearch : true,
	        	filter_searchDelay : 300,
	        	filter_reset : 'button.reset',
	        	
	        }
	     });
	     		
	     	 $("#users").removeClass('tablesorter tablesorter-default');
	    } 
	);

</script>